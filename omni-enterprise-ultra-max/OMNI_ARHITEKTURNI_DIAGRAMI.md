# ğŸ—ï¸ OMNI ENTERPRISE ULTRA MAX - Arhitekturni Diagrami

## ğŸ“‹ Kazalo
1. [Visokonivojska Arhitektura](#visokonivojska-arhitektura)
2. [Podrobna Arhitektura](#podrobna-arhitektura)
3. [Podatkovni Tok](#podatkovni-tok)
4. [Deployment Arhitektura](#deployment-arhitektura)
5. [Varnostna Arhitektura](#varnostna-arhitektura)
6. [Skalabilnostna Arhitektura](#skalabilnostna-arhitektura)

---

## ğŸ¯ Visokonivojska Arhitektura

### Osnovna Struktura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        OMNI PLATFORM                            â”‚
â”‚                   Enterprise Ultra Max                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   FRONTEND     â”‚            â”‚   EXTERNAL      â”‚
        â”‚   Dashboard    â”‚            â”‚   Clients       â”‚
        â”‚   (React)      â”‚            â”‚   (API Users)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                               â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  API GATEWAY   â”‚
                        â”‚  (Cloud Run)   â”‚
                        â”‚                â”‚
                        â”‚ â€¢ Auth         â”‚
                        â”‚ â€¢ Rate Limit   â”‚
                        â”‚ â€¢ Cache        â”‚
                        â”‚ â€¢ Metrics      â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                       â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ML BACKEND    â”‚    â”‚   AI SERVICES   â”‚
            â”‚  (Cloud Run)   â”‚    â”‚   (Optional)    â”‚
            â”‚                â”‚    â”‚                 â”‚
            â”‚ â€¢ 50+ APIs     â”‚    â”‚ â€¢ GPU Workers   â”‚
            â”‚ â€¢ Business     â”‚    â”‚ â€¢ ML Training   â”‚
            â”‚   Logic        â”‚    â”‚ â€¢ Batch Jobs    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                       â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                                        â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚   DATABASES    â”‚  â”‚ CACHE  â”‚  â”‚   EXTERNAL APIs   â”‚
    â”‚                â”‚  â”‚        â”‚  â”‚                   â”‚
    â”‚ â€¢ PostgreSQL   â”‚  â”‚ Redis  â”‚  â”‚ â€¢ OpenAI          â”‚
    â”‚ â€¢ MongoDB      â”‚  â”‚        â”‚  â”‚ â€¢ Stripe          â”‚
    â”‚ â€¢ Firestore    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â€¢ PayPal          â”‚
    â”‚ â€¢ Neo4j        â”‚              â”‚ â€¢ Twilio          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ â€¢ SendGrid        â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Podrobna Arhitektura

### Gateway Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API GATEWAY                             â”‚
â”‚                    (gateway/app/main.py)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Middleware Stack (Order Matters)          â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  1. MetricsMiddleware         - Prometheus metrics     â”‚ â”‚
â”‚  â”‚  2. PerformanceMonitor        - Latency tracking       â”‚ â”‚
â”‚  â”‚  3. SecurityHeadersMiddleware - Security headers       â”‚ â”‚
â”‚  â”‚  4. UsageTracker              - Usage analytics        â”‚ â”‚
â”‚  â”‚  5. RateLimiter               - Rate limiting          â”‚ â”‚
â”‚  â”‚  6. ResponseCache             - Redis cache            â”‚ â”‚
â”‚  â”‚  7. TracingMiddleware         - OpenTelemetry          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   Core Components                      â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â€¢ auth.py         - API key validation               â”‚ â”‚
â”‚  â”‚  â€¢ proxy.py        - Reverse proxy logic              â”‚ â”‚
â”‚  â”‚  â€¢ rate_limiter.py - Redis-backed rate limiting       â”‚ â”‚
â”‚  â”‚  â€¢ response_cache.py - Response caching               â”‚ â”‚
â”‚  â”‚  â€¢ metrics.py      - Business metrics                 â”‚ â”‚
â”‚  â”‚  â€¢ tracing.py      - Distributed tracing              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 External Dependencies                  â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â€¢ Redis          - Rate limit + cache storage        â”‚ â”‚
â”‚  â”‚  â€¢ Secret Manager - API keys + credentials            â”‚ â”‚
â”‚  â”‚  â€¢ Sentry         - Error tracking                    â”‚ â”‚
â”‚  â”‚  â€¢ Prometheus     - Metrics export                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Backend Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ML BACKEND                              â”‚
â”‚                   (backend/main.py)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚               Middleware Stack                         â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  1. InternalPrefixStripper - Strip /internal prefix   â”‚ â”‚
â”‚  â”‚  2. SecurityHeadersMiddleware - Security               â”‚ â”‚
â”‚  â”‚  3. MetricsMiddleware - Prometheus                     â”‚ â”‚
â”‚  â”‚  4. PerformanceMonitor - Latency                       â”‚ â”‚
â”‚  â”‚  5. UsageTracker - Usage stats (if not internal)      â”‚ â”‚
â”‚  â”‚  6. RateLimiter - Rate limiting (if not internal)     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  API Route Modules (30+)               â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  Core Routes:                                          â”‚ â”‚
â”‚  â”‚    â€¢ ai_routes.py              - AI/ML endpoints       â”‚ â”‚
â”‚  â”‚    â€¢ analytics_routes.py       - BI analytics          â”‚ â”‚
â”‚  â”‚    â€¢ auth_routes.py            - Authentication        â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  Payment Routes:                                       â”‚ â”‚
â”‚  â”‚    â€¢ stripe_routes.py          - Stripe integration    â”‚ â”‚
â”‚  â”‚    â€¢ paypal_routes.py          - PayPal integration    â”‚ â”‚
â”‚  â”‚    â€¢ crypto_routes.py          - Crypto payments       â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  Business Routes:                                      â”‚ â”‚
â”‚  â”‚    â€¢ affiliate_routes.py       - Affiliate program     â”‚ â”‚
â”‚  â”‚    â€¢ marketplace_routes.py     - API marketplace       â”‚ â”‚
â”‚  â”‚    â€¢ subscription_routes.py    - Subscriptions         â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  Intelligence Routes:                                  â”‚ â”‚
â”‚  â”‚    â€¢ ai_intelligence_routes.py - Advanced AI           â”‚ â”‚
â”‚  â”‚    â€¢ growth_engine_routes.py   - Viral marketing       â”‚ â”‚
â”‚  â”‚    â€¢ rag_routes.py             - RAG system            â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  Compliance Routes:                                    â”‚ â”‚
â”‚  â”‚    â€¢ gdpr_routes.py            - GDPR compliance       â”‚ â”‚
â”‚  â”‚    â€¢ security_routes.py        - Security features     â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  Builder Routes:                                       â”‚ â”‚
â”‚  â”‚    â€¢ dashboard_builder_routes.py - Dashboard gen      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Service Layer                       â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  AI/ML Services:                                       â”‚ â”‚
â”‚  â”‚    â€¢ services/ai/prediction_service.py                 â”‚ â”‚
â”‚  â”‚    â€¢ services/ai/recommendation_service.py             â”‚ â”‚
â”‚  â”‚    â€¢ services/ai/rag_service.py                        â”‚ â”‚
â”‚  â”‚    â€¢ services/ai/dashboard_builder_service.py          â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  Compliance Services:                                  â”‚ â”‚
â”‚  â”‚    â€¢ services/compliance/gdpr_service.py               â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  Payment Services:                                     â”‚ â”‚
â”‚  â”‚    â€¢ payment_gateways/stripe_gateway.py                â”‚ â”‚
â”‚  â”‚    â€¢ payment_gateways/paypal_gateway.py                â”‚ â”‚
â”‚  â”‚    â€¢ payment_gateways/crypto_gateway.py                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  Database Layer                        â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â€¢ database.py - Connection management                 â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  Databases:                                            â”‚ â”‚
â”‚  â”‚    â€¢ PostgreSQL - Relational data                      â”‚ â”‚
â”‚  â”‚    â€¢ MongoDB    - Document store                       â”‚ â”‚
â”‚  â”‚    â€¢ Redis      - Cache + sessions                     â”‚ â”‚
â”‚  â”‚    â€¢ Firestore  - GCP NoSQL                            â”‚ â”‚
â”‚  â”‚    â€¢ Neo4j      - Graph database (optional)            â”‚ â”‚
â”‚  â”‚    â€¢ FAISS      - Vector search (RAG)                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Podatkovni Tok

### Request Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚ 1. HTTPS Request
      â”‚    Header: x-api-key: xxx
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API GATEWAY    â”‚
â”‚  (Cloud Run)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚
â”‚ 2. Validate     â”‚â—„â”€â”€â”€â”€â”€â”€â”
â”‚    API Key      â”‚       â”‚ 2a. Check Redis
â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”¤    (cached keys)
â”‚                 â”‚       â”‚
â”‚ 3. Check Rate   â”‚â—„â”€â”€â”€â”€â”€â”€â”˜
â”‚    Limit        â”‚       â”‚ 3a. Increment
â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”¤    counter in Redis
â”‚                 â”‚       â”‚
â”‚ 4. Check Cache  â”‚â—„â”€â”€â”€â”€â”€â”€â”˜
â”‚    (if GET)     â”‚       â”‚ 4a. Redis lookup
â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚       â”‚
â”‚ 5. Proxy to     â”‚       â”‚
â”‚    Backend      â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
         â”‚                â”‚
         â”‚ 6. Forward     â”‚
         â”‚    Request     â”‚
         â–¼                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   ML BACKEND    â”‚       â”‚
â”‚   (Cloud Run)   â”‚       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚                 â”‚       â”‚
â”‚ 7. Route to     â”‚       â”‚
â”‚    Endpoint     â”‚       â”‚
â”‚                 â”‚       â”‚
â”‚ 8. Business     â”‚       â”‚
â”‚    Logic        â”‚       â”‚
â”‚                 â”‚       â”‚
â”‚ 9. DB Query     â”‚â—„â”€â”€â”€â”€â”€â”€â”˜
â”‚                 â”‚       â”‚ 9a. PostgreSQL
â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”¤ 9b. MongoDB
â”‚                 â”‚       â”‚ 9c. Redis
â”‚                 â”‚       â”‚
â”‚ 10. ML/AI       â”‚â—„â”€â”€â”€â”€â”€â”€â”˜
â”‚     Processing  â”‚       â”‚ 10a. TensorFlow
â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”¤ 10b. PyTorch
â”‚                 â”‚       â”‚ 10c. OpenAI API
â”‚                 â”‚       â”‚
â”‚ 11. Response    â”‚       â”‚
â”‚     Generation  â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
         â”‚                â”‚
         â”‚ 12. JSON       â”‚
         â”‚     Response   â”‚
         â–¼                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  API GATEWAY    â”‚       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚                 â”‚       â”‚
â”‚ 13. Cache       â”‚â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Response    â”‚       â”‚ 13a. Store in Redis
â”‚     (if GET)    â”‚       â”‚     (TTL: 5min)
â”‚                 â”‚       â”‚
â”‚ 14. Record      â”‚â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Metrics     â”‚       â”‚ 14a. Prometheus
â”‚                 â”‚       â”‚
â”‚ 15. Log         â”‚â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚     Request     â”‚       â”‚ 15a. Cloud Logging
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
         â”‚                â”‚
         â”‚ 16. HTTPS      â”‚
         â”‚     Response   â”‚
         â–¼                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  Client  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
```

### AI/ML Prediction Flow

```
User Request
     â”‚
     â–¼
Gateway (Auth + Rate Limit)
     â”‚
     â–¼
Backend: POST /api/v1/ai-intelligence/churn-prediction
     â”‚
     â”œâ”€â–º 1. Validate Input (Pydantic)
     â”‚
     â”œâ”€â–º 2. Load Model
     â”‚      â”‚
     â”‚      â”œâ”€â–º From Redis Cache (if available)
     â”‚      â””â”€â–º From Disk/Cloud Storage (if cold)
     â”‚
     â”œâ”€â–º 3. Preprocess Data
     â”‚      â”‚
     â”‚      â”œâ”€â–º Normalization
     â”‚      â”œâ”€â–º Feature Engineering
     â”‚      â””â”€â–º Encoding
     â”‚
     â”œâ”€â–º 4. Model Inference
     â”‚      â”‚
     â”‚      â”œâ”€â–º TensorFlow/PyTorch predict()
     â”‚      â””â”€â–º Generate probability scores
     â”‚
     â”œâ”€â–º 5. Post-process Results
     â”‚      â”‚
     â”‚      â”œâ”€â–º Interpret predictions
     â”‚      â”œâ”€â–º Generate recommendations
     â”‚      â””â”€â–º Calculate confidence
     â”‚
     â”œâ”€â–º 6. Store Results
     â”‚      â”‚
     â”‚      â”œâ”€â–º MongoDB (prediction history)
     â”‚      â””â”€â–º PostgreSQL (audit log)
     â”‚
     â””â”€â–º 7. Return JSON Response
            {
              "churn_probability": 0.23,
              "risk_level": "medium",
              "recommendations": [...]
            }
```

### RAG Query Flow

```
User Query: "What is Omni Platform?"
     â”‚
     â–¼
Gateway
     â”‚
     â–¼
Backend: POST /api/v1/rag/query
     â”‚
     â”œâ”€â–º 1. Generate Query Embedding
     â”‚      â”‚
     â”‚      â”œâ”€â–º Use Sentence Transformers
     â”‚      â””â”€â–º 768-dim vector
     â”‚
     â”œâ”€â–º 2. Vector Search
     â”‚      â”‚
     â”‚      â”œâ”€â–º FAISS similarity search
     â”‚      â”œâ”€â–º top_k=5 results
     â”‚      â””â”€â–º Cosine similarity scores
     â”‚
     â”œâ”€â–º 3. Retrieve Context
     â”‚      â”‚
     â”‚      â””â”€â–º Get original documents
     â”‚          from MongoDB
     â”‚
     â”œâ”€â–º 4. Build Prompt
     â”‚      â”‚
     â”‚      â””â”€â–º Context: [retrieved docs]
     â”‚          Query: "What is Omni Platform?"
     â”‚
     â”œâ”€â–º 5. LLM Generation
     â”‚      â”‚
     â”‚      â”œâ”€â–º OpenAI GPT-4
     â”‚      â”œâ”€â–º Anthropic Claude
     â”‚      â””â”€â–º Ollama (local)
     â”‚
     â”œâ”€â–º 6. Generate Answer
     â”‚      â”‚
     â”‚      â””â”€â–º Include citations
     â”‚
     â””â”€â–º 7. Return Response
            {
              "answer": "Omni Platform is...",
              "sources": [
                {"content": "...", "score": 0.89}
              ]
            }
```

---

## ğŸš€ Deployment Arhitektura

### Cloud Run Setup (Current)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  GOOGLE CLOUD PLATFORM                  â”‚
â”‚                 Project: refined-graph-471712-n9        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Region: europe-west1 (Belgium)                        â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          Cloud Run Services                     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚  ai-gateway                             â”‚   â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ CPU: 1 vCPU                          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Memory: 512 MB                       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Min instances: 0                     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Max instances: 100                   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Concurrency: 80                      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Timeout: 60s                         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Port: 8080                           â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚  omni-ultra-backend-prod                â”‚   â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ CPU: 2 vCPU                          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Memory: 4 GB                         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Min instances: 1                     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Max instances: 100                   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Concurrency: 80                      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Timeout: 300s                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Port: 8080                           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ RUN_AS_INTERNAL=1                    â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          Cloud SQL (PostgreSQL)                 â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â€¢ Tier: db-f1-micro                            â”‚   â”‚
â”‚  â”‚  â€¢ Storage: 10 GB SSD                           â”‚   â”‚
â”‚  â”‚  â€¢ Backups: Daily (7-day retention)             â”‚   â”‚
â”‚  â”‚  â€¢ High Availability: Optional                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          Memorystore (Redis)                    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â€¢ Tier: Basic                                  â”‚   â”‚
â”‚  â”‚  â€¢ Memory: 1 GB                                 â”‚   â”‚
â”‚  â”‚  â€¢ Version: 6.x                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          Firestore                              â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â€¢ Mode: Native                                 â”‚   â”‚
â”‚  â”‚  â€¢ Location: europe-west1                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          Secret Manager                         â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â€¢ OPENAI_API_KEY                               â”‚   â”‚
â”‚  â”‚  â€¢ STRIPE_SECRET_KEY                            â”‚   â”‚
â”‚  â”‚  â€¢ PAYPAL_CLIENT_SECRET                         â”‚   â”‚
â”‚  â”‚  â€¢ DATABASE_PASSWORD                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          Cloud Monitoring                       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â€¢ Logs: Cloud Logging                          â”‚   â”‚
â”‚  â”‚  â€¢ Metrics: Cloud Monitoring                    â”‚   â”‚
â”‚  â”‚  â€¢ Traces: Cloud Trace                          â”‚   â”‚
â”‚  â”‚  â€¢ Errors: Error Reporting                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          Artifact Registry                      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  europe-west1-docker.pkg.dev/                   â”‚   â”‚
â”‚  â”‚    refined-graph-471712-n9/omni/                â”‚   â”‚
â”‚  â”‚      - omni-ultra-backend:latest                â”‚   â”‚
â”‚  â”‚      - ai-gateway:latest                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### GKE Setup (Alternative)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GKE Autopilot Cluster                      â”‚
â”‚              Region: europe-west1                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Namespace: default                                    â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Deployment: ml-worker                          â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  Replicas: 2-50 (HPA)                           â”‚   â”‚
â”‚  â”‚  CPU: 2-4 cores                                 â”‚   â”‚
â”‚  â”‚  Memory: 4-8 Gi                                 â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  Pods:                                          â”‚   â”‚
â”‚  â”‚    â€¢ ml-worker-abc123                           â”‚   â”‚
â”‚  â”‚    â€¢ ml-worker-def456                           â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  Readiness Probe:                               â”‚   â”‚
â”‚  â”‚    â€¢ Path: /api/health                          â”‚   â”‚
â”‚  â”‚    â€¢ Delay: 300s (ML model loading)             â”‚   â”‚
â”‚  â”‚    â€¢ Period: 10s                                â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  Liveness Probe:                                â”‚   â”‚
â”‚  â”‚    â€¢ Path: /api/health                          â”‚   â”‚
â”‚  â”‚    â€¢ Delay: 60s                                 â”‚   â”‚
â”‚  â”‚    â€¢ Period: 30s                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Service: ml-worker (ClusterIP)                 â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  Port: 8080                                     â”‚   â”‚
â”‚  â”‚  Internal: ml-worker.default.svc.cluster.local  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  HorizontalPodAutoscaler                        â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  Min Replicas: 2                                â”‚   â”‚
â”‚  â”‚  Max Replicas: 50                               â”‚   â”‚
â”‚  â”‚  Target CPU: 70%                                â”‚   â”‚
â”‚  â”‚  Target Memory: 80%                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ Varnostna Arhitektura

### Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SECURITY LAYERS                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: Network Security
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ Cloud Armor (DDoS protection)                        â”‚
â”‚  â€¢ VPC Firewall Rules                                   â”‚
â”‚  â€¢ Private IP for databases                             â”‚
â”‚  â€¢ TLS 1.3 encryption in transit                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 2: Application Security (Gateway)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ API Key Authentication                               â”‚
â”‚  â€¢ Rate Limiting (Redis-backed)                         â”‚
â”‚  â€¢ Input Validation (Pydantic)                          â”‚
â”‚  â€¢ CORS Configuration                                   â”‚
â”‚  â€¢ Security Headers:                                    â”‚
â”‚      - X-Frame-Options: DENY                            â”‚
â”‚      - X-Content-Type-Options: nosniff                  â”‚
â”‚      - X-XSS-Protection: 1; mode=block                  â”‚
â”‚      - Strict-Transport-Security: max-age=31536000      â”‚
â”‚      - Content-Security-Policy: default-src 'self'      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 3: Backend Security
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ JWT Authentication                                   â”‚
â”‚  â€¢ RBAC (Role-Based Access Control)                     â”‚
â”‚  â€¢ SQL Injection Protection (SQLAlchemy ORM)            â”‚
â”‚  â€¢ XSS Protection (Template escaping)                   â”‚
â”‚  â€¢ CSRF Protection                                      â”‚
â”‚  â€¢ PII Redaction in Logs                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 4: Data Security
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ AES-256 Encryption at Rest                           â”‚
â”‚  â€¢ TLS 1.3 in Transit                                   â”‚
â”‚  â€¢ Database Encryption (Cloud SQL)                      â”‚
â”‚  â€¢ Secret Manager for Credentials                       â”‚
â”‚  â€¢ Automated Backups (7-day retention)                  â”‚
â”‚  â€¢ Point-in-Time Recovery                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 5: Monitoring & Audit
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ Audit Logging (All actions)                          â”‚
â”‚  â€¢ Security Event Monitoring                            â”‚
â”‚  â€¢ Anomaly Detection                                    â”‚
â”‚  â€¢ Automated Vulnerability Scanning:                    â”‚
â”‚      - Dependabot (Dependencies)                        â”‚
â”‚      - Trivy (Containers)                               â”‚
â”‚      - Bandit (Python Security)                         â”‚
â”‚      - Safety (Dependency Check)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 6: Compliance
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ GDPR Compliance (EU)                                 â”‚
â”‚  â€¢ ZVOP-2 Compliance (Slovenia)                         â”‚
â”‚  â€¢ Data Residency (EU servers)                          â”‚
â”‚  â€¢ Right to Access/Erasure/Portability                  â”‚
â”‚  â€¢ Consent Management                                   â”‚
â”‚  â€¢ Breach Notification (72h)                            â”‚
â”‚  â€¢ DPO Contact: dpo@omni-platform.eu                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚ 1. Request with API Key
      â”‚    Header: x-api-key: prod-key-omni-2025
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Gateway       â”‚
â”‚   auth.py       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚
â”‚ 2. Extract Key  â”‚
â”‚                 â”‚
â”‚ 3. Validate     â”‚â—„â”€â”€â”€â”€â”€â”€â”
â”‚    Format       â”‚       â”‚ Check: prefix, length
â”‚                 â”‚       â”‚
â”‚ 4. Check Redis  â”‚â—„â”€â”€â”€â”€â”€â”€â”˜
â”‚    Cache        â”‚       â”‚ Fast lookup
â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚       â”‚
â”‚ 5. If not       â”‚       â”‚
â”‚    cached,      â”‚       â”‚
â”‚    verify in    â”‚â—„â”€â”€â”€â”€â”€â”€â”˜
â”‚    database     â”‚       â”‚ PostgreSQL
â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚       â”‚
â”‚ 6. Determine    â”‚       â”‚
â”‚    Tier         â”‚       â”‚ FREE/PRO/ENTERPRISE
â”‚                 â”‚       â”‚
â”‚ 7. Set          â”‚       â”‚
â”‚    request.stateâ”‚       â”‚ tier, user_id
â”‚                 â”‚       â”‚
â”‚ 8. Allow or     â”‚       â”‚
â”‚    Deny (401)   â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
         â”‚                â”‚
         â”‚ 9. Continue    â”‚
         â”‚    to Rate     â”‚
         â”‚    Limit       â”‚
         â–¼                â”‚
```

---

## ğŸ“ˆ Skalabilnostna Arhitektura

### Horizontal Scaling

```
Traffic Increase
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Load Balancer (Cloud Run/GKE)        â”‚
â”‚    Automatic Request Distribution        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”
       â”‚       â”‚       â”‚
       â–¼       â–¼       â–¼
    â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”
    â”‚Pod1â”‚  â”‚Pod2â”‚  â”‚PodNâ”‚  Auto-scaling
    â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  (2-100 instances)
       â”‚       â”‚       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Databases  â”‚
        â”‚ (Shared)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Vertical Scaling

```
Low Traffic          Medium Traffic       High Traffic
  (CPU: 50%)           (CPU: 70%)          (CPU: 90%)
     â”‚                     â”‚                    â”‚
     â–¼                     â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1 vCPU   â”‚  â”€â”€â–º    â”‚ 2 vCPU   â”‚  â”€â”€â–º    â”‚ 4 vCPU   â”‚
â”‚ 512 MB   â”‚         â”‚ 2 GB     â”‚         â”‚ 8 GB     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Geographic Scaling

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Multi-Region Architecture                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EU Region â”‚     â”‚  US Region  â”‚     â”‚ Asia Region â”‚
â”‚ europe-west1â”‚     â”‚ us-central1 â”‚     â”‚asia-se1     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚     â”‚             â”‚     â”‚             â”‚
â”‚  Backend    â”‚     â”‚  Backend    â”‚     â”‚  Backend    â”‚
â”‚  Gateway    â”‚     â”‚  Gateway    â”‚     â”‚  Gateway    â”‚
â”‚             â”‚     â”‚             â”‚     â”‚             â”‚
â”‚  DB (write) â”‚â—„â”€â”€â”€â–ºâ”‚ DB (replica)â”‚â—„â”€â”€â”€â–ºâ”‚ DB (replica)â”‚
â”‚             â”‚     â”‚             â”‚     â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Global Load     â”‚
                  â”‚ Balancer        â”‚
                  â”‚ (Geo-routing)   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚ Users   â”‚
                      â”‚ (Global)â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Caching Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Multi-Level Caching                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Level 1: CDN (CloudFlare/Cloud CDN)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ Static Assets (JS, CSS, Images)                      â”‚
â”‚  â€¢ TTL: 1 day                                            â”‚
â”‚  â€¢ Edge Locations: 200+                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Level 2: Gateway Response Cache (Redis)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ GET Requests                                          â”‚
â”‚  â€¢ TTL: 5 minutes                                        â”‚
â”‚  â€¢ Hit Rate: ~60%                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Level 3: Application Cache (Redis)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ Database Query Results                                â”‚
â”‚  â€¢ ML Model Predictions                                  â”‚
â”‚  â€¢ User Sessions                                         â”‚
â”‚  â€¢ TTL: Varies (1min - 1hour)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Level 4: Database Query Cache
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ PostgreSQL Query Cache                                â”‚
â”‚  â€¢ MongoDB WiredTiger Cache                              â”‚
â”‚  â€¢ In-Memory                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ZakljuÄek

Ta dokument opisuje celotno arhitekturo **Omni Enterprise Ultra Max** platforme:

- âœ… **Modularna zasnova** - Enostavno dodajanje novih funkcij
- âœ… **Skalabilna arhitektura** - Od 0 do milijon uporabnikov
- âœ… **Varna implementacija** - VeÄ nivojev varnosti
- âœ… **Visoka razpoloÅ¾ljivost** - 99.9% uptime SLA
- âœ… **Geo-distribuirana** - Multi-region support

Za veÄ podrobnosti, glej:
- **OMNI_ENTERPRISE_ULTRA_MAX_VPOGLED.md** - Celotna dokumentacija
- **OMNI_HITRA_REFERENCA.md** - Quick reference
- **IMPLEMENTATION_COMPLETE.md** - Technical details

---

*Zadnja posodobitev: 3. november 2025*
*Verzija: 1.0.0*
